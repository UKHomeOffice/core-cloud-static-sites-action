name: Test Missing Working Directory

on:
  workflow_dispatch:

jobs:
  test-missing-working-directory:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Run Static Sites Action without working-directory
        uses: UKHomeOffice/core-cloud-static-sites-action@CCL-763-testing
        with:
          assume-role-arn: arn:aws:iam::123456789012:role/TestRole
          bucket-name: test-bucket
          cloudfront-distribution: TESTDISTID


      - name: Assert Missing Input Error
        if: always()
        run: |
          echo "Checking logs..."
          echo "${{ steps.run-action.outputs.logs }}" | grep "::error::Missing required input: working-directory" && \
          echo "${{ steps.run-action.outputs.logs }}" | grep "Failure - Main Validate Inputs" && \
          echo "✅ Assertion passed" || \
          (echo "❌ Assertion failed" && exit 1)
